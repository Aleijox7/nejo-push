<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>{% block title %}Nejo Push{% endblock %}</title>
        <link id="favicon" rel="icon" type="image/x-icon" href="{{ asset('favicon.ico') }}" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        {% block stylesheets %}
            <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
            <link href="{{path('push_style_css')}}" rel="stylesheet">
        {% endblock %}
        {% block head_javascripts %}
        {% endblock %}   
    </head>
    {% block ante_body %}
    <body>
        {% block body %}
            <div id="wrap">
                <section id="container" >
                    <!-- AQUI SE MOSTRARAN LAS NOTIFICACIONES -->
                    <div id="notificaciones" class="notification-box col-xs-12 col-sm-4 col-sm-offset-8">
                    </div>
                    <!-- **********************************************************************************************************************************************************
                    TOP BAR CONTENT & NOTIFICATIONS
                    *********************************************************************************************************************************************************** -->
                    <!--header start-->
                    {% block header %}
                        <header>
                          <nav class="background-gradient navbar navbar-expand-md navbar-light fixed-top bg-light">
                            <a class="navbar-brand" href="#"><img style="width:150px;" src="{{ asset('public/img/logos/logo-black.png') }}"></a>
                            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                              <span class="navbar-toggler-icon"></span>
                            </button>
                            <div class="collapse navbar-collapse" id="navbarCollapse">
                              <ul class="navbar-nav mr-auto">
                                {# <li class="nav-item active">
                                  <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
                                </li>
                                <li class="nav-item">
                                  <a class="nav-link" href="#">Link</a>
                                </li>
                                <li class="nav-item">
                                  <a class="nav-link disabled" href="#">Disabled</a>
                                </li> #}
                              </ul>
                              {% if app.session.started and app.session.get('sessionUsername') != NULL %}
                                {% block login %}
                                <ul class="nav pull-right top-menu nombreUsuario">
                                    <li class="nav-item">Has entrado como <strong>{% block userName %} {{app.session.get('sessionUsername')}} {% endblock %}</strong> <button type="submit" class="btn-submit" name="submit"><a href="" class="btn-gradient btn-logout"><span><i class="fa fa-sign-out-alt"></i>&nbsp;Logout</span></a></button></li>
                                </ul>                      
                                {% endblock %}
                            {% endif %}
                            </div>
                          </nav>
                        </header>
                    {% endblock %}
                    <div id="main" class="container-fluid" style="margin-top:70px;">
                        <div class="row">
                        {% block main_sidebar %}
                            <nav class="col-md-2 d-none d-md-block bg-light sidebar">
                              <div class="sidebar-sticky">
                                <ul class="nav flex-column">
                                  <li class="nav-item">
                                    <a class="nav-link active" href="#">
                                      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-home"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                                      Dashboard <span class="sr-only">(current)</span>
                                  </a>
                              </li>
                              <li class="nav-item">
                                <a class="nav-link" href="#">
                                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline></svg>
                                  Orders
                              </a>
                          </li>
                          <li class="nav-item">
                            <a class="nav-link" href="#">
                              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-shopping-cart"><circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path></svg>
                              Products
                          </a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link" href="#">
                          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-users"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
                          Customers
                      </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="#">
                      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-bar-chart-2"><line x1="18" y1="20" x2="18" y2="10"></line><line x1="12" y1="20" x2="12" y2="4"></line><line x1="6" y1="20" x2="6" y2="14"></line></svg>
                      Reports
                  </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-layers"><polygon points="12 2 2 7 12 12 22 7 12 2"></polygon><polyline points="2 17 12 22 22 17"></polyline><polyline points="2 12 12 17 22 12"></polyline></svg>
                  Integrations
              </a>
          </li>
      </ul>

      <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
          <span>Saved reports</span>
          <a class="d-flex align-items-center text-muted" href="#">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-plus-circle"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line></svg>
        </a>
    </h6>
    <ul class="nav flex-column mb-2">
      <li class="nav-item">
        <a class="nav-link" href="#">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
          Current month
      </a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="#">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
      Last quarter
  </a>
</li>
<li class="nav-item">
    <a class="nav-link" href="#">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
      Social engagement
  </a>
</li>
<li class="nav-item">
    <a class="nav-link" href="#">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
      Year-end sale
  </a>
</li>
</ul>
</div>
</nav>

                        {% endblock %}

                        {% block main_content %}
                            <!-- **********************************************************************************************************************************************************
                            MAIN CONTENT
                            *********************************************************************************************************************************************************** -->
                            <!--main content start-->
                            <section id="main-content" class="col-md-10">
                                <section class="wrapper">
                                    {% block Titol %}
                                    {% endblock %}
                                    {% block wrapper %}
                                        <div class="row">
                                            <div class="col-lg-9 main-chart">

                                                <div class="row mtbox">
                                                    <div class="col-md-2 col-sm-2 col-md-offset-1 box0">
                                                        <div class="box1">
                                                            <span class="li_heart"></span>
                                                            <h3>933</h3>
                                                        </div>
                                                        <p>933 People liked your page the last 24hs. Whoohoo!</p>
                                                    </div>
                                                    <div class="col-md-2 col-sm-2 box0">
                                                        <div class="box1">
                                                            <span class="li_cloud"></span>
                                                            <h3>+48</h3>
                                                        </div>
                                                        <p>48 New files were added in your cloud storage.</p>
                                                    </div>
                                                    <div class="col-md-2 col-sm-2 box0">
                                                        <div class="box1">
                                                            <span class="li_stack"></span>
                                                            <h3>23</h3>
                                                        </div>
                                                        <p>You have 23 unread messages in your inbox.</p>
                                                    </div>
                                                    <div class="col-md-2 col-sm-2 box0">
                                                        <div class="box1">
                                                            <span class="li_news"></span>
                                                            <h3>+10</h3>
                                                        </div>
                                                        <p>More than 10 news were added in your reader.</p>
                                                    </div>
                                                    <div class="col-md-2 col-sm-2 box0">
                                                        <div class="box1">
                                                            <span class="li_data"></span>
                                                            <h3>OK!</h3>
                                                        </div>
                                                        <p>Your server is working perfectly. Relax & enjoy.</p>
                                                    </div>

                                                </div><!-- /row mt -->  


                                                <div class="row mt">
                                                    <!-- SERVER STATUS PANELS -->
                                                    <div class="col-md-4 col-sm-4 mb">
                                                        <div class="white-panel pn donut-chart">
                                                            <div class="white-header">
                                                                <h5>SERVER LOAD</h5>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-sm-6 col-xs-6 goleft">
                                                                    <p><i class="fa fa-database"></i> 70%</p>
                                                                </div>
                                                            </div>
                                                            <canvas id="serverstatus01" height="120" width="120"></canvas>
                                                            <script>
                                                                var doughnutData = [
                                                                    {
                                                                        value: 70,
                                                                        color: "#68dff0"
                                                                    },
                                                                    {
                                                                        value: 30,
                                                                        color: "#fdfdfd"
                                                                    }
                                                                ];
                                                                var myDoughnut = new Chart(document.getElementById("serverstatus01").getContext("2d")).Doughnut(doughnutData);
                                                            </script>
                                                        </div><! --/grey-panel -->
                                                    </div><!-- /col-md-4-->


                                                    <div class="col-md-4 col-sm-4 mb">
                                                        <div class="white-panel pn">
                                                            <div class="white-header">
                                                                <h5>TOP PRODUCT</h5>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-sm-6 col-xs-6 goleft">
                                                                    <p><i class="fa fa-heart"></i> 122</p>
                                                                </div>
                                                                <div class="col-sm-6 col-xs-6"></div>
                                                            </div>
                                                            <div class="centered">
                                                                <img src="{{ asset('assets/img/product.png ') }}" width="120">
                                                            </div>
                                                        </div>
                                                    </div><!-- /col-md-4 -->

                                                    <div class="col-md-4 mb">
                                                        <!-- WHITE PANEL - TOP USER -->
                                                        <div class="white-panel pn">
                                                            <div class="white-header">
                                                                <h5>TOP USER</h5>
                                                            </div>
                                                            <p><img src="{{ asset('assets/img/ui-zac.jpg ') }}" class="img-circle" width="80"></p>
                                                            <p><b>Zac Snider</b></p>
                                                            <div class="row">
                                                                <div class="col-md-6">
                                                                    <p class="small mt">MEMBER SINCE</p>
                                                                    <p>2012</p>
                                                                </div>
                                                                <div class="col-md-6">
                                                                    <p class="small mt">TOTAL SPEND</p>
                                                                    <p>$ 47,60</p>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div><!-- /col-md-4 -->


                                                </div><!-- /row -->


                                                <div class="row">
                                                    <!-- TWITTER PANEL -->
                                                    <div class="col-md-4 mb">
                                                        <div class="darkblue-panel pn">
                                                            <div class="darkblue-header">
                                                                <h5>DROPBOX STATICS</h5>
                                                            </div>
                                                            <canvas id="serverstatus02" height="120" width="120"></canvas>
                                                            <script>
                                                                var doughnutData = [
                                                                    {
                                                                        value: 60,
                                                                        color: "#68dff0"
                                                                    },
                                                                    {
                                                                        value: 40,
                                                                        color: "#444c57"
                                                                    }
                                                                ];
                                                                var myDoughnut = new Chart(document.getElementById("serverstatus02").getContext("2d")).Doughnut(doughnutData);
                                                            </script>
                                                            <p>April 17, 2014</p>
                                                            <footer>
                                                                <div class="pull-left">
                                                                    <h5><i class="fa fa-hdd-o"></i> 17 GB</h5>
                                                                </div>
                                                                <div class="pull-right">
                                                                    <h5>60% Used</h5>
                                                                </div>
                                                            </footer>
                                                        </div><! -- /darkblue panel -->
                                                    </div><!-- /col-md-4 -->


                                                    <div class="col-md-4 mb">
                                                        <!-- INSTAGRAM PANEL -->
                                                        <div class="instagram-panel pn">
                                                            <i class="fa fa-instagram fa-4x"></i>
                                                            <p>@THISISYOU<br/>
                                                                5 min. ago
                                                            </p>
                                                            <p><i class="fa fa-comment"></i> 18 | <i class="fa fa-heart"></i> 49</p>
                                                        </div>
                                                    </div><!-- /col-md-4 -->

                                                    <div class="col-md-4 col-sm-4 mb">
                                                        <!-- REVENUE PANEL -->
                                                        <div class="darkblue-panel pn">
                                                            <div class="darkblue-header">
                                                                <h5>REVENUE</h5>
                                                            </div>
                                                            <div class="chart mt">
                                                                <div class="sparkline" data-type="line" data-resize="true" data-height="75" data-width="90%" data-line-width="1" data-line-color="#fff" data-spot-color="#fff" data-fill-color="" data-highlight-line-color="#fff" data-spot-radius="4" data-data="[200,135,667,333,526,996,564,123,890,464,655]"></div>
                                                            </div>
                                                            <p class="mt"><b>$ 17,980</b><br/>Month Income</p>
                                                        </div>
                                                    </div><!-- /col-md-4 -->

                                                </div><!-- /row -->

                                                <div class="row mt">
                                                    <!--CUSTOM CHART START -->
                                                    <div class="border-head">
                                                        <h3>VISITS</h3>
                                                    </div>
                                                    <div class="custom-bar-chart">
                                                        <ul class="y-axis">
                                                            <li><span>10.000</span></li>
                                                            <li><span>8.000</span></li>
                                                            <li><span>6.000</span></li>
                                                            <li><span>4.000</span></li>
                                                            <li><span>2.000</span></li>
                                                            <li><span>0</span></li>
                                                        </ul>
                                                        <div class="bar">
                                                            <div class="title">JAN</div>
                                                            <div class="value tooltips" data-original-title="8.500" data-toggle="tooltip" data-placement="top">85%</div>
                                                        </div>
                                                        <div class="bar ">
                                                            <div class="title">FEB</div>
                                                            <div class="value tooltips" data-original-title="5.000" data-toggle="tooltip" data-placement="top">50%</div>
                                                        </div>
                                                        <div class="bar ">
                                                            <div class="title">MAR</div>
                                                            <div class="value tooltips" data-original-title="6.000" data-toggle="tooltip" data-placement="top">60%</div>
                                                        </div>
                                                        <div class="bar ">
                                                            <div class="title">APR</div>
                                                            <div class="value tooltips" data-original-title="4.500" data-toggle="tooltip" data-placement="top">45%</div>
                                                        </div>
                                                        <div class="bar">
                                                            <div class="title">MAY</div>
                                                            <div class="value tooltips" data-original-title="3.200" data-toggle="tooltip" data-placement="top">32%</div>
                                                        </div>
                                                        <div class="bar ">
                                                            <div class="title">JUN</div>
                                                            <div class="value tooltips" data-original-title="6.200" data-toggle="tooltip" data-placement="top">62%</div>
                                                        </div>
                                                        <div class="bar">
                                                            <div class="title">JUL</div>
                                                            <div class="value tooltips" data-original-title="7.500" data-toggle="tooltip" data-placement="top">75%</div>
                                                        </div>
                                                    </div>
                                                    <!--custom chart end-->
                                                </div><!-- /row --> 

                                            </div><!-- /col-lg-9 END SECTION MIDDLE -->


                                            <!-- **********************************************************************************************************************************************************
                                            RIGHT SIDEBAR CONTENT
                                            *********************************************************************************************************************************************************** -->                  

                                            <div class="col-lg-3 ds">
                                                <!--COMPLETED ACTIONS DONUTS CHART-->
                                                <h3>NOTIFICATIONS</h3>

                                                <!-- First Action -->
                                                <div class="desc">
                                                    <div class="thumb">
                                                        <span class="badge bg-theme"><i class="fa fa-clock-o"></i></span>
                                                    </div>
                                                    <div class="details">
                                                        <p><muted>2 Minutes Ago</muted><br/>
                                                        <a href="#">James Brown</a> subscribed to your newsletter.<br/>
                                                        </p>
                                                    </div>
                                                </div>
                                                <!-- Second Action -->
                                                <div class="desc">
                                                    <div class="thumb">
                                                        <span class="badge bg-theme"><i class="fa fa-clock-o"></i></span>
                                                    </div>
                                                    <div class="details">
                                                        <p><muted>3 Hours Ago</muted><br/>
                                                        <a href="#">Diana Kennedy</a> purchased a year subscription.<br/>
                                                        </p>
                                                    </div>
                                                </div>
                                                <!-- Third Action -->
                                                <div class="desc">
                                                    <div class="thumb">
                                                        <span class="badge bg-theme"><i class="fa fa-clock-o"></i></span>
                                                    </div>
                                                    <div class="details">
                                                        <p><muted>7 Hours Ago</muted><br/>
                                                        <a href="#">Brandon Page</a> purchased a year subscription.<br/>
                                                        </p>
                                                    </div>
                                                </div>
                                                <!-- Fourth Action -->
                                                <div class="desc">
                                                    <div class="thumb">
                                                        <span class="badge bg-theme"><i class="fa fa-clock-o"></i></span>
                                                    </div>
                                                    <div class="details">
                                                        <p><muted>11 Hours Ago</muted><br/>
                                                        <a href="#">Mark Twain</a> commented your post.<br/>
                                                        </p>
                                                    </div>
                                                </div>
                                                <!-- Fifth Action -->
                                                <div class="desc">
                                                    <div class="thumb">
                                                        <span class="badge bg-theme"><i class="fa fa-clock-o"></i></span>
                                                    </div>
                                                    <div class="details">
                                                        <p><muted>18 Hours Ago</muted><br/>
                                                        <a href="#">Daniel Pratt</a> purchased a wallet in your store.<br/>
                                                        </p>
                                                    </div>
                                                </div>

                                                <!-- USERS ONLINE SECTION -->
                                                <h3>TEAM MEMBERS</h3>
                                                <!-- First Member -->
                                                <div class="desc">
                                                    <div class="thumb">
                                                        <img class="img-circle" src="{{ asset('assets/img/ui-divya.jpg') }}" width="35px" height="35px" align="">
                                                    </div>
                                                    <div class="details">
                                                        <p><a href="#">DIVYA MANIAN</a><br/>
                                                        <muted>Available</muted>
                                                        </p>
                                                    </div>
                                                </div>
                                                <!-- Second Member -->
                                                <div class="desc">
                                                    <div class="thumb">
                                                        <img class="img-circle" src="{{ asset('assets/img/ui-sherman.jpg ') }}" width="35px" height="35px" align="">
                                                    </div>
                                                    <div class="details">
                                                        <p><a href="#">DJ SHERMAN</a><br/>
                                                        <muted>I am Busy</muted>
                                                        </p>
                                                    </div>
                                                </div>
                                                <!-- Third Member -->
                                                <div class="desc">
                                                    <div class="thumb">
                                                        <img class="img-circle" src="{{ asset('assets/img/ui-danro.jpg ') }}" width="35px" height="35px" align="">
                                                    </div>
                                                    <div class="details">
                                                        <p><a href="#">DAN ROGERS</a><br/>
                                                        <muted>Available</muted>
                                                        </p>
                                                    </div>
                                                </div>
                                                <!-- Fourth Member -->
                                                <div class="desc">
                                                    <div class="thumb">
                                                        <img class="img-circle" src="{{ asset('assets/img/ui-zac.jpg ') }}" width="35px" height="35px" align="">
                                                    </div>
                                                    <div class="details">
                                                        <p><a href="#">Zac Sniders</a><br/>
                                                        <muted>Available</muted>
                                                        </p>
                                                    </div>
                                                </div>
                                                <!-- Fifth Member -->
                                                <div class="desc">
                                                    <div class="thumb">
                                                        <img class="img-circle" src="{{ asset('assets/img/ui-sam.jpg ') }}" width="35px" height="35px" align="">
                                                    </div>
                                                    <div class="details">
                                                        <p><a href="#">Marcel Newman</a><br/>
                                                        <muted>Available</muted>
                                                        </p>
                                                    </div>
                                                </div>

                                                <!-- CALENDAR-->
                                                <div id="calendar" class="mb">
                                                    <div class="panel green-panel no-margin">
                                                        <div class="panel-body">
                                                            <div id="date-popover" class="popover top" style="cursor: pointer; disadding: block; margin-left: 33%; margin-top: -50px; width: 175px;">
                                                                <div class="arrow"></div>
                                                                <h3 class="popover-title" style="disadding: none;"></h3>
                                                                <div id="date-popover-content" class="popover-content"></div>
                                                            </div>
                                                            <div id="my-calendar"></div>
                                                        </div>
                                                    </div>
                                                </div><!-- / calendar -->

                                            </div><!-- /col-lg-3 -->
                                        </div><! --/row -->


                                    {% endblock %}
                                    {% block redirect_menu %}
                                    {% endblock %}

                                </section>
                            </section>

                            <!--main content end-->
                        {% endblock %}
                    </div>
                </section>

            </div>
            {% block footer %}
                <!--footer start-->
                {# <footer id="footer" class="site-footer">
                    <div class="text-center ml">
                        2017 - Nejo Push
                        <a href="#" class="go-top">
                            <i class="fa fa-angle-up"></i>
                        </a>
                    </div>
                </footer> #}
                <!--footer end-->
            {% endblock %}
</div>
</div>
        {% endblock %}
        {% block javascripts %}
            <script src="https://code.jquery.com/jquery-3.2.1.min.js" crossorigin="anonymous"></script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" crossorigin="anonymous"></script>
            <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" crossorigin="anonymous"></script>
            <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
            <script defer src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>
            <script src="https://www.gstatic.com/firebasejs/4.2.0/firebase.js"></script>
            <script src="https://www.gstatic.com/firebasejs/4.2.0/firebase-app.js"></script>
            <script src="https://www.gstatic.com/firebasejs/4.2.0/firebase-auth.js"></script>
            <script src="https://www.gstatic.com/firebasejs/4.2.0/firebase-database.js"></script>
            <script src="https://www.gstatic.com/firebasejs/4.2.0/firebase-messaging.js"></script>
            <script>
            	let isSubscribed = false;
            	let swRegistration = null;

            	var endpoint = "";
				var key = "";
				var auth = "";

            	const applicationServerPublicKey = "{{vapid_public_key}}";

                  // Initialize Firebase
                  // TODO: Replace with your project's customized code snippet
                  var config = {
                    apiKey: "{{push_api_key}}",
                    authDomain: "nejo-push-notifications.firebaseapp.com",
                    databaseURL: "https://nejo-push-notifications.firebaseio.com",
                    projectId: "nejo-push-notifications",
                    storageBucket: "nejo-push-notifications.appspot.com",
                    messagingSenderId: "851116311783"
                  };
                  firebase.initializeApp(config);

            	if ('serviceWorker' in navigator) {

                      navigator.serviceWorker.register('{{asset("service-worker.js")}}').then(function(registration) {
                        setInterval(function(){update = registration.update();if (update) {console.log('Service Worker Actualizado correctamente');}},25000);
                         if ('pushManager' in registration) {
                            swRegistration = registration;
            				// unsubscribeUser();
                         initialiseUI();

                         const applicationServerKey = urlB64ToUint8Array(applicationServerPublicKey);

                         swRegistration.pushManager.subscribe({
                           userVisibleOnly: true,
                           applicationServerKey: applicationServerKey
                       })
                         .then(function(subscription) {
                           updateSubscriptionOnServer(subscriptionJSON);

                           isSubscribed = true;
                       })
                         .catch(function(err) {
                           console.log('Failed to subscribe the user: ', err);
                       });
                     } else {
                         console.log('The service worker doesn\'t support push');
                     }
                     console.log('ServiceWorker registration successful with scope: ', registration.scope);
                     }).catch(function(err) {
    	                  //registration failed :(
    	                  console.log('ServiceWorker registration failed: ', err);
    	              });
            }else {
              console.log('No service-worker on this browser');
          }

    //         	if ('serviceWorker' in navigator && 'PushManager' in window) {
				//   console.log('Service Worker and Push is supported');

				//   navigator.serviceWorker.register('{{asset("service-worker.js")}}')
				//   .then(function(swReg) {
				//     console.log('Service Worker is registered', swReg);

				//     swRegistration = swReg;
				//     initialiseUI();
				//   })
				//   .catch(function(error) {
				//     console.error('Service Worker Error', error);
				//   });
				// } else {
				//   console.warn('Push messaging is not supported');
				//   pushButton.textContent = 'Push Not Supported';
				// }

            	function urlB64ToUint8Array(base64String) {
            		const padding = '='.repeat((4 - base64String.length % 4) % 4);
            		const base64 = (base64String + padding)
            		.replace(/\-/g, '+')
            		.replace(/_/g, '/');

            		const rawData = window.atob(base64);
            		const outputArray = new Uint8Array(rawData.length);

            		for (let i = 0; i < rawData.length; ++i) {
            			outputArray[i] = rawData.charCodeAt(i);
            		}
            		return outputArray;
            	}

				function initialiseUI() {
				  // Set the initial subscription value
				  swRegistration.pushManager.getSubscription()
				  .then(function(subscription) {
				  	isSubscribed = !(subscription === null);

				  	updateSubscriptionOnServer(subscription);

				  	if (isSubscribed) {
				  		console.log('User IS subscribed.');
				  	} else {
				  		console.log('User is NOT subscribed.');
				  	}
				  });
				}

				function updateSubscriptionOnServer(subscription) {
				    path = "{{path('register_notification_user')}}";
                    token = "{{app.session.get('jwt')}}";

                    console.log(subscription);

                    subscriptionString = JSON.stringify(subscription);
                    subscriptionJSON = JSON.parse(subscriptionString);

                    endpoint = subscriptionJSON.endpoint;
                    key = subscriptionJSON.keys.p256dh;
                    auth = subscriptionJSON.keys.auth;

                    $.ajax({
                        url: path,
                        async: true,
                        data: {'endpoint':endpoint, 'publicKey':key, 'auth':auth},
                        type: 'POST',
                        beforeSend: function(request) {
                            request.setRequestHeader("token", token);
                        },
                    });
				  return false;
				}

				function unsubscribeUser() {
				  swRegistration.pushManager.getSubscription()
				  .then(function(subscription) {
				    if (subscription) {
				      return subscription.unsubscribe();
				    }
				  })
				  .catch(function(error) {
				    console.log('Error unsubscribing', error);
				  })
				  .then(function() {
				    updateSubscriptionOnServer(null);

				    console.log('User is unsubscribed.');
				    isSubscribed = false;
				  });
				}
				
            </script>
            <script>
                var interval = null;

                window.onload = function (){
                    clearLastAnnotation();
                }

                function clearLastAnnotation(){
                    interval = setInterval(function(){
                        $(".notificacion:first-child").slideUp(function() {
                            $(this).remove();
                        });
                    }, 3000);
                }

            // $(".notificacion a").click(function(){
                $("body").on("click", ".notificacion a", function(){
                    var padre = $(this).parent();
                    padre.slideUp(function() {
                        padre.remove();
                    });
                });

                function addNotification(data){
                    clearInterval(interval);
                    $('#notificaciones').html($('#notificaciones').html() + data);
                    $(".notificacion:last-child").hide();
                    $(".notificacion:last-child").slideDown();
                    clearLastAnnotation();
                }

                function addErrorNotification(data){
                    clearInterval(interval);
                    $('#notificaciones').html($('#notificaciones').html() + '<div class="alert notificacion alerta col-xs-12"> <span class="col-xs-11">'+data+'</span><a><i class="rounded fa fa-times" aria-hidden="true"></i></a></div>');
                    $(".notificacion:last-child").hide();
                    $(".notificacion:last-child").slideDown();
                    clearLastAnnotation();
                }

                function addSuccessNotification(data){
                    clearInterval(interval);
                    $('#notificaciones').html($('#notificaciones').html() + '<div class="alert notificacion completado col-xs-12"> <span class="col-xs-11">'+data+'</span><a><i class="rounded fa fa-times" aria-hidden="true"></i></a></div>');
                    $(".notificacion:last-child").hide();
                    $(".notificacion:last-child").slideDown();
                    clearLastAnnotation();
                }
            </script>
        {% endblock %}

    {% block javascriptsAdcionales %}
        <script type="text/javascript">
        function changeFaviconAddNotification(){
            $('#favicon').attr('href',"{{ asset('favicon-notification.ico') }}");
        }
        function changeFaviconRemoveNotification(){
            $('#favicon').attr('href',"{{ asset('favicon.ico') }}");
        }
        </script>
    {% endblock %}
</body>
{% endblock %}
</html>
